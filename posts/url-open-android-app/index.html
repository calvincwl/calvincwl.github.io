<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="zh-cn"><meta name=author content="李伟成"><meta name=description content="首次正式接触安卓工程，正好要做个点击外部链接（分享链接）打开游戏的功能碰到了点问题总结一下。
unity导出android工程    网上搜索到的方法都是需要更改android工程的manifest文件，因此首先需要的是将unity工程导出android工程。我使用的是新的gradle方法，因此需要安装Android Studio
 打开unity的Build Settings，如图： 选择Android平台并点击Switch Platform； 点击Player Settings； 检查是否设置了Other Settings的Package Name，gradle的导出方式必须填写这项； 在Publishing Settings中可以先加上签名信息（gradle方式发布release包必须有签名）。 回到Build Settings将Build System改为Gradle (New)并勾选上Export Project后点击Export，选择想要导出的文件夹点击Select Folder后工程就会被导出。  正常编译android工程需要修改的内容    unity导出时可能一些信息已经过时需要自己更新。
 build.gradle是gradle自动化编译过程的配置文件，其中可以找到类似于  buildscript { ... dependencies { classpath 'com.android.tools.build:gradle:2.3.2' } } 的代码，在Android Plugin for Gradle中确认最新的工具版本号将2.3.2替换为最新的； 2. 打开Android Studio选择Import project (Eclipse ADT, Gradle, etc.)选择导出工程的build.gradle文件后点击OK，等待gradle执行完成； 3. 这步是可选操作，构建完成后会在工程目录下生成gradle/wrapper的目录结构，其中存放的是gradle工具及配置信息。如果想要将gradle更新到最新版本，可以用文本工具打开gradle-wrapper.properties文件，将distributionUrl项的值改为最新包的地址的完整包地址，如https://services.gradle.org/distributions/gradle-4.0-all.zip，其中冒号前需要加转义符。
如何让外部链接点击后启动游戏    需要在你的启动activity中加入intent-filter字段，首先这个字段是可以重复的，一开始写在一起于是怎么打包都无法打开游戏……unity导出的工程只有一个activity——UnityPlayerActivity，然后列出几个intent-filter字段下的关键属性：
 添加action属性设置值为&#34;android.intent.action.VIEW&#34;； 添加category属性设置值为&#34;android.intent.category.DEFAULT&#34;，这样可以接受外部任意输入； 添加category属性设置值为&#34;android.intent.category.BROWSABLE&#34;，这样可以通过浏览器启动； 添加data属性，我只用到了android:scheme和android:host两个，其实android:scheme就够了，具体这些参数什么含义以及填写规则可以查看Android 使用Scheme实现从网页启动APP   完成后的代码大致如下："><meta name=keywords content="博客,游戏开发,个人"><meta name=twitter:card content="summary"><meta name=twitter:title content="外部链接打开安卓应用的方法"><meta name=twitter:description content="首次正式接触安卓工程，正好要做个点击外部链接（分享链接）打开游戏的功能碰到了点问题总结一下。
unity导出android工程    网上搜索到的方法都是需要更改android工程的manifest文件，因此首先需要的是将unity工程导出android工程。我使用的是新的gradle方法，因此需要安装Android Studio
 打开unity的Build Settings，如图： 选择Android平台并点击Switch Platform； 点击Player Settings； 检查是否设置了Other Settings的Package Name，gradle的导出方式必须填写这项； 在Publishing Settings中可以先加上签名信息（gradle方式发布release包必须有签名）。 回到Build Settings将Build System改为Gradle (New)并勾选上Export Project后点击Export，选择想要导出的文件夹点击Select Folder后工程就会被导出。  正常编译android工程需要修改的内容    unity导出时可能一些信息已经过时需要自己更新。
 build.gradle是gradle自动化编译过程的配置文件，其中可以找到类似于  buildscript { ... dependencies { classpath 'com.android.tools.build:gradle:2.3.2' } } 的代码，在Android Plugin for Gradle中确认最新的工具版本号将2.3.2替换为最新的； 2. 打开Android Studio选择Import project (Eclipse ADT, Gradle, etc.)选择导出工程的build.gradle文件后点击OK，等待gradle执行完成； 3. 这步是可选操作，构建完成后会在工程目录下生成gradle/wrapper的目录结构，其中存放的是gradle工具及配置信息。如果想要将gradle更新到最新版本，可以用文本工具打开gradle-wrapper.properties文件，将distributionUrl项的值改为最新包的地址的完整包地址，如https://services.gradle.org/distributions/gradle-4.0-all.zip，其中冒号前需要加转义符。
如何让外部链接点击后启动游戏    需要在你的启动activity中加入intent-filter字段，首先这个字段是可以重复的，一开始写在一起于是怎么打包都无法打开游戏……unity导出的工程只有一个activity——UnityPlayerActivity，然后列出几个intent-filter字段下的关键属性：
 添加action属性设置值为&#34;android.intent.action.VIEW&#34;； 添加category属性设置值为&#34;android.intent.category.DEFAULT&#34;，这样可以接受外部任意输入； 添加category属性设置值为&#34;android.intent.category.BROWSABLE&#34;，这样可以通过浏览器启动； 添加data属性，我只用到了android:scheme和android:host两个，其实android:scheme就够了，具体这些参数什么含义以及填写规则可以查看Android 使用Scheme实现从网页启动APP   完成后的代码大致如下："><meta property="og:title" content="外部链接打开安卓应用的方法"><meta property="og:description" content="首次正式接触安卓工程，正好要做个点击外部链接（分享链接）打开游戏的功能碰到了点问题总结一下。
unity导出android工程    网上搜索到的方法都是需要更改android工程的manifest文件，因此首先需要的是将unity工程导出android工程。我使用的是新的gradle方法，因此需要安装Android Studio
 打开unity的Build Settings，如图： 选择Android平台并点击Switch Platform； 点击Player Settings； 检查是否设置了Other Settings的Package Name，gradle的导出方式必须填写这项； 在Publishing Settings中可以先加上签名信息（gradle方式发布release包必须有签名）。 回到Build Settings将Build System改为Gradle (New)并勾选上Export Project后点击Export，选择想要导出的文件夹点击Select Folder后工程就会被导出。  正常编译android工程需要修改的内容    unity导出时可能一些信息已经过时需要自己更新。
 build.gradle是gradle自动化编译过程的配置文件，其中可以找到类似于  buildscript { ... dependencies { classpath 'com.android.tools.build:gradle:2.3.2' } } 的代码，在Android Plugin for Gradle中确认最新的工具版本号将2.3.2替换为最新的； 2. 打开Android Studio选择Import project (Eclipse ADT, Gradle, etc.)选择导出工程的build.gradle文件后点击OK，等待gradle执行完成； 3. 这步是可选操作，构建完成后会在工程目录下生成gradle/wrapper的目录结构，其中存放的是gradle工具及配置信息。如果想要将gradle更新到最新版本，可以用文本工具打开gradle-wrapper.properties文件，将distributionUrl项的值改为最新包的地址的完整包地址，如https://services.gradle.org/distributions/gradle-4.0-all.zip，其中冒号前需要加转义符。
如何让外部链接点击后启动游戏    需要在你的启动activity中加入intent-filter字段，首先这个字段是可以重复的，一开始写在一起于是怎么打包都无法打开游戏……unity导出的工程只有一个activity——UnityPlayerActivity，然后列出几个intent-filter字段下的关键属性：
 添加action属性设置值为&#34;android.intent.action.VIEW&#34;； 添加category属性设置值为&#34;android.intent.category.DEFAULT&#34;，这样可以接受外部任意输入； 添加category属性设置值为&#34;android.intent.category.BROWSABLE&#34;，这样可以通过浏览器启动； 添加data属性，我只用到了android:scheme和android:host两个，其实android:scheme就够了，具体这些参数什么含义以及填写规则可以查看Android 使用Scheme实现从网页启动APP   完成后的代码大致如下："><meta property="og:type" content="article"><meta property="og:url" content="https://calvincwl.github.io/posts/url-open-android-app/"><meta property="article:published_time" content="2017-06-15T00:00:00+00:00"><meta property="article:modified_time" content="2017-07-04T00:00:00+00:00"><title>外部链接打开安卓应用的方法 · 神の記述</title><link rel=canonical href=https://calvincwl.github.io/posts/url-open-android-app/><script src=https://kit.fontawesome.com/d443c6acc0.js crossorigin=anonymous></script><link rel=stylesheet href=/css/coder.min.4e15cc690401543c744f350c15d4095d0a0e3988eaed0571c42f72199379c73f.css integrity="sha256-ThXMaQQBVDx0TzUMFdQJXQoOOYjq7QVxxC9yGZN5xz8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.89c82b6022b96f77aeb521b240daec4f87ea029d84d1c78b8acd0735b91b3c92.css integrity="sha256-icgrYCK5b3eutSGyQNrsT4fqAp2E0ceLis0HNbkbPJI=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><script defer src=https://twemoji.maxcdn.com/v/13.0.1/twemoji.min.js integrity=sha384-5f4X0lBluNY/Ib4VhGx0Pf6iDCF99VGXJIyYy7dDLY5QlEd7Ap0hICSSZA1XYbc4 crossorigin=anonymous></script><meta name=generator content="Hugo 0.80.0"></head><body class=colorscheme-auto onload=twemoji.parse(document.body);><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>神の記述</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>关于</a></li><li class=navigation-item><a class=navigation-link href=/posts/>博客</a></li><li class=navigation-item><a class=navigation-link href=/contact/>联系我</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=https://calvincwl.github.io/en/>English</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://calvincwl.github.io/posts/url-open-android-app/>外部链接打开安卓应用的方法</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i><time datetime=2017-06-15T00:00:00Z>2017-06-15</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>阅读时间：1 分钟</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i><a href=/categories/mobile/>Mobile</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i><a href=/tags/android/>android</a>
<span class=separator>•</span>
<a href=/tags/unity3d/>unity3d</a>
<span class=separator>•</span>
<a href=/tags/scheme/>scheme</a></div></div></header><div><p>首次正式接触安卓工程，正好要做个点击外部链接（分享链接）打开游戏的功能碰到了点问题总结一下。</p><h1 id=unity导出android工程>unity导出android工程
<a class=heading-link href=#unity%e5%af%bc%e5%87%baandroid%e5%b7%a5%e7%a8%8b><i class="fa fa-link" aria-hidden=true></i></a></h1><p>网上搜索到的方法都是需要更改android工程的manifest文件，因此首先需要的是将unity工程导出android工程。我使用的是新的gradle方法，因此需要安装<a href=https://developer.android.com/studio/index.html>Android Studio</a></p><ol><li>打开unity的<strong>Build Settings</strong>，如图：<img src=switch-platform.jpg alt=asset_img></li><li>选择<strong>Android</strong>平台并点击<strong>Switch Platform</strong>；</li><li>点击<strong>Player Settings</strong>；
检查是否设置了<strong>Other Settings</strong>的<strong>Package Name</strong>，gradle的导出方式必须填写这项；
在<strong>Publishing Settings</strong>中可以先加上签名信息（gradle方式发布release包必须有签名）。</li><li>回到<strong>Build Settings</strong>将<strong>Build System</strong>改为<strong>Gradle (New)<strong>并勾选上</strong>Export Project</strong>后点击<strong>Export</strong>，选择想要导出的文件夹点击<strong>Select Folder</strong>后工程就会被导出。</li></ol><h1 id=正常编译android工程需要修改的内容>正常编译android工程需要修改的内容
<a class=heading-link href=#%e6%ad%a3%e5%b8%b8%e7%bc%96%e8%af%91android%e5%b7%a5%e7%a8%8b%e9%9c%80%e8%a6%81%e4%bf%ae%e6%94%b9%e7%9a%84%e5%86%85%e5%ae%b9><i class="fa fa-link" aria-hidden=true></i></a></h1><p>unity导出时可能一些信息已经过时需要自己更新。</p><ol><li><strong>build.gradle</strong>是gradle自动化编译过程的配置文件，其中可以找到类似于</li></ol><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gradle data-lang=gradle>buildscript {
	...
	dependencies {
		classpath <span style=font-style:italic>&#39;com.android.tools.build:gradle:2.3.2&#39;</span>
	}
}
</code></pre></div><p>的代码，在<a href=https://developer.android.com/studio/releases/gradle-plugin.html#revisions>Android Plugin for Gradle</a>中确认最新的工具版本号将<strong>2.3.2</strong>替换为最新的；
2. 打开Android Studio选择<strong>Import project (Eclipse ADT, Gradle, etc.)<strong>选择导出工程的build.gradle文件后点击</strong>OK</strong>，等待gradle执行完成；
3. 这步是可选操作，构建完成后会在工程目录下生成gradle/wrapper的目录结构，其中存放的是gradle工具及配置信息。如果想要将gradle更新到最新版本，可以用文本工具打开<strong>gradle-wrapper.properties</strong>文件，将<strong>distributionUrl</strong>项的值改为<a href=https://services.gradle.org/distributions/>最新包的地址</a>的完整包地址，如<strong>https://services.gradle.org/distributions/gradle-4.0-all.zip</strong>，其中冒号前需要加转义符。</p><h1 id=如何让外部链接点击后启动游戏>如何让外部链接点击后启动游戏
<a class=heading-link href=#%e5%a6%82%e4%bd%95%e8%ae%a9%e5%a4%96%e9%83%a8%e9%93%be%e6%8e%a5%e7%82%b9%e5%87%bb%e5%90%8e%e5%90%af%e5%8a%a8%e6%b8%b8%e6%88%8f><i class="fa fa-link" aria-hidden=true></i></a></h1><p>需要在你的启动activity中加入<strong>intent-filter</strong>字段，首先这个字段是可以重复的，一开始写在一起于是怎么打包都无法打开游戏……unity导出的工程只有一个activity——<strong>UnityPlayerActivity</strong>，然后列出几个<strong>intent-filter</strong>字段下的关键属性：</p><ul><li>添加<strong>action</strong>属性设置值为"android.intent.action.VIEW"；</li><li>添加<strong>category</strong>属性设置值为"android.intent.category.DEFAULT"，这样可以接受外部任意输入；</li><li>添加<strong>category</strong>属性设置值为"android.intent.category.BROWSABLE"，这样可以通过浏览器启动；</li><li>添加<strong>data</strong>属性，我只用到了<strong>android:scheme</strong>和<strong>android:host</strong>两个，其实<strong>android:scheme</strong>就够了，具体这些参数什么含义以及填写规则可以查看<a href=http://www.jianshu.com/p/1cd02fe1810f>Android 使用Scheme实现从网页启动APP</a></li></ul><hr><p>完成后的代码大致如下：</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=font-weight:700>&lt;activity&gt;</span>
	<span style=font-weight:700>&lt;intent-filter&gt;</span>
		<span style=font-style:italic>&lt;!-- 原有的内容 --&gt;</span>
	<span style=font-weight:700>&lt;/intent-filter&gt;</span>
	<span style=font-weight:700>&lt;intent-filter&gt;</span>
		<span style=font-weight:700>&lt;action</span> android:name=<span style=font-style:italic>&#34;android.intent.action.VIEW&#34;</span> <span style=font-weight:700>/&gt;</span>
		<span style=font-weight:700>&lt;category</span> android:name=<span style=font-style:italic>&#34;android.intent.category.DEFAULT&#34;</span> <span style=font-weight:700>/&gt;</span>
		<span style=font-weight:700>&lt;category</span> android:name=<span style=font-style:italic>&#34;android.intent.category.BROWSABLE&#34;</span> <span style=font-weight:700>/&gt;</span>
		<span style=font-weight:700>&lt;data</span> android:scheme=<span style=font-style:italic>&#34;myscheme&#34;</span> android:host=<span style=font-style:italic>&#34;myhost&#34;</span> <span style=font-weight:700>/&gt;</span>
	<span style=font-weight:700>&lt;/intent-filter&gt;</span>
<span style=font-weight:700>&lt;/activity&gt;</span>
</code></pre></div><p>于是再编写个简单html文件测试功能：</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=font-weight:700>html</span>&gt;
&lt;<span style=font-weight:700>a</span> href=<span style=font-style:italic>&#34;myscheme://myhost/?param=value&#34;</span>&gt;start my app!&lt;/<span style=font-weight:700>a</span>&gt;
&lt;/<span style=font-weight:700>html</span>&gt;
</code></pre></div><p>成功~</p><h1 id=总结>总结
<a class=heading-link href=#%e6%80%bb%e7%bb%93><i class="fa fa-link" aria-hidden=true></i></a></h1><p>其实还是没做过android项目对AndroidManifest.xml的配置方法不熟，走了很多弯路，安装完后无法打开app、启动后闪退等……</p><h1 id=说明>说明
<a class=heading-link href=#%e8%af%b4%e6%98%8e><i class="fa fa-link" aria-hidden=true></i></a></h1><p>微信的WebView貌似受到腾讯的限制scheme的方法不起效，还需尝试通过外部网页调用的方法。
另外，iOS的方法类似，只需在info.plist中配置<strong>URL Identifier</strong>(类似Android的host)和<strong>URL Scheme</strong>即可。</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2017 -
2021
李伟成
·
技术支持 <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js></script></body></html>